<img  src="vkinder_bot_logo.png"  alt="logo">

# [VKinder](https://vk.com/club219923021 "VKinder - сервис знакомств") - чат-bot для VK

Чат-бот VKinder ищет людей, подходящих под условия, на основании информации о пользователе из VK:

* Возраст,
* пол,
* город,
* семейное положение.

У тех людей, которые подошли по требованиям пользователю, получает топ-3 популярных <br>
фотографии профиля и отправляет их пользователю в чат вместе со ссылкой на найденного человека.<br>
Популярность определяется по количеству лайков и комментариев.<br>
Добавляет человека в избранный список, используя базу данных.<br>
Добавляет человека в игнор-список, чтобы он больше не попадался при поиске, используя базу данных.<br>


### Как установить:
Для работы чат-бота необходимо иметь сообщество в ВК, для которого нужно получить `access-token`,<br>
зайдя в `Управление сообществом`, раздел `Работа с API`, `Создать ключ`. Кроме этого, нужно создать<br> 
приложение в Вашем профиле, для которого нужно получить `service key`, `app_id` и `client secret`.<br>

Дальнейшие инструкции подробно описаны здесь: [Как получить токен пользователя для ВКонтакте?](https://dvmn.org/encyclopedia/qna/63/kak-poluchit-token-polzovatelja-dlja-vkontakte/) 

1. Установить необходимые модули Python из `requirements.txt` (`pip install -r requirements.txt`).
2. В модуле `config.py` указать требуемые токены для VK, пароль, логин, тип, адрес сервера и имя БД. 
3. Создать БД, имя которой указано в `config.py`, используя `psql, pgadmin` или другое приложение<br> 
   для `PostgreSQL`
4. Запустить модуль `models.py` для создания таблиц в БД 
5. Запустить бота модулем `main.py`.
6. Зайти в чат с ботом можно по ссылке [VKinder](https://vk.com/im?sel=c4)
7. Активировать бота вводом любого слова из списка `start, hi, привет, старт`.
8. На появившейся клавиатуре чата нажать `Поиск` для получения результатов подбора.<br> 
   Бот подбирает профили людей в соответствии с вашим полом, городом, возрастом и семейным положением.<br>
   В случае отсутствия в Вашем профиле необходимой информации, она запрашивается у пользователя.<br>
9. Для добавления понравившегося пользователя необходимо нажать кнопку `В Избранное` и его профиль<br> 
   добавится в таблицу БД `Избранное` вместе с фотографиями профиля. 
10. Список избранных людей можно вывести, нажав кнопку `Избранное`.
11. Для игнорирования пользователя нажать кнопку `Игнорировать` и профиль добавится в Игнор-лист.<br> 
    Просмотреть игнор-лист можно, нажав кнопку `Игнор-лист`
12. Очистка Избранного - кнопка `Удалить Избраннное`, очистка Игнор-листа - кнопка `Удалить Игнор-лист`



#### Модель БД VKinder
[VKinder DB diagram](vkinder_database_diagram.png)

#### Пример работы "VKinder chat-bot"  
[VKinder work example](vkinder_work_example.mp4)
https://github.com/alekgs/vkinder_bot/blob/main/vkinder_example_work.mp4
